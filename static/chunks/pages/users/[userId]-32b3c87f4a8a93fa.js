(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{9508:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/[userId]",function(){return t(973)}])},9852:function(e,s,t){"use strict";var l=t(5893),r=t(1163),n=t(7294),a=t(7516);s.Z=e=>{let{showBackArrow:s,label:t}=e,i=(0,r.useRouter)(),c=(0,n.useCallback)(()=>{i.back()},[i]);return(0,l.jsx)("div",{className:"border-b-[1px] border-neutral-800 p-5",children:(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[s&&(0,l.jsx)(a.YiX,{onClick:c,color:"white",size:20,className:" cursor-pointer  hover:opacity-70  transition "}),(0,l.jsx)("h1",{className:"text-white text-xl font-semibold",children:t})]})})}},7406:function(e,s,t){"use strict";var l=t(5893),r=t(2402),n=t(9410);s.Z=e=>{let{userId:s}=e,{data:t=[]}=(0,r.Z)(s);return(0,l.jsx)(l.Fragment,{children:t.map(e=>(0,l.jsx)(n.Z,{userId:s,data:e},e.id))})}},9410:function(e,s,t){"use strict";t.d(s,{Z:function(){return v}});var l=t(5893),r=t(1163),n=t(7294),a=t(8193),i=t(6422),c=t(1524),o=t(1954),d=t(6154),u=t(6501),x=t(4217),m=t(2402),h=e=>{let{postId:s,userId:t}=e,{data:l}=(0,o.Z)(),{data:r,mutate:a}=(0,x.Z)(s),{mutate:i}=(0,m.Z)(t),h=(0,c.Z)(),p=(0,n.useMemo)(()=>{let e=(null==r?void 0:r.likedIds)||[];return e.includes(null==l?void 0:l.id)},[r,l]),v=(0,n.useCallback)(async()=>{if(!l)return h.onOpen();try{let e;e=p?()=>d.Z.delete("/api/like",{data:{postId:s}}):()=>d.Z.post("/api/like",{postId:s}),await e(),a(),i(),u.Am.success("Success")}catch(e){u.Am.error("Something went wrong")}},[l,p,s,i,a,h]);return{hasLiked:p,toggleLike:v}},p=t(9873),v=e=>{var s;let{data:t={},userId:d}=e,u=(0,r.useRouter)(),x=(0,c.Z)(),{data:m}=(0,o.Z)(),{hasLiked:v,toggleLike:f}=h({postId:t.id,userId:d}),j=(0,n.useCallback)(e=>{e.stopPropagation(),u.push("/users/".concat(t.user.id))},[u,t.user.id]),w=(0,n.useCallback)(()=>{u.push("/posts/".concat(t.id))},[u,t.id]),N=(0,n.useCallback)(async e=>{if(e.stopPropagation(),!m)return x.onOpen();f()},[x,m,f]),Z=v?a.M_L:a.lo,b=(0,n.useMemo)(()=>(null==t?void 0:t.createdAt)?(0,i.Z)(new Date(t.createdAt)):null,[t.createdAt]);return(0,l.jsx)("div",{onClick:w,className:" border-b-[1px]  border-neutral-800  p-5  cursor-pointer  hover:bg-neutral-900  transition ",children:(0,l.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,l.jsx)(p.Z,{userId:t.user.id}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,l.jsx)("p",{onClick:j,className:" text-white  font-semibold  cursor-pointer  hover:underline ",children:t.user.name}),(0,l.jsxs)("span",{onClick:j,className:" text-neutral-500 cursor-pointer hover:underline hidden md:block ",children:["@",t.user.username]}),(0,l.jsx)("span",{className:"text-neutral-500 text-sm",children:b})]}),(0,l.jsx)("div",{className:"text-white mt-1",children:t.body}),(0,l.jsxs)("div",{className:"flex flex-row items-center mt-3 gap-10",children:[(0,l.jsxs)("div",{className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-sky-500 ",children:[(0,l.jsx)(a.e$J,{size:20}),(0,l.jsx)("p",{children:(null===(s=t.comments)||void 0===s?void 0:s.length)||0})]}),(0,l.jsxs)("div",{onClick:N,className:" flex  flex-row  items-center  text-neutral-500  gap-2  cursor-pointer  transition  hover:text-red-500 ",children:[(0,l.jsx)(Z,{color:v?"red":"",size:20}),(0,l.jsx)("p",{children:t.likedIds.length})]})]})]})]})})}},4217:function(e,s,t){"use strict";var l=t(9734),r=t(88);s.Z=e=>{let{data:s,error:t,isLoading:n,mutate:a}=(0,l.ZP)(e?"/api/posts/".concat(e):null,r.Z);return{data:s,error:t,isLoading:n,mutate:a}}},2402:function(e,s,t){"use strict";var l=t(9734),r=t(88);s.Z=e=>{let{data:s,error:t,isLoading:n,mutate:a}=(0,l.ZP)(e?"/api/posts?userId=".concat(e):"/api/posts",r.Z);return{data:s,error:t,isLoading:n,mutate:a}}},973:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var l=t(5893),r=t(1163),n=t(373),a=t(1699),i=t(7406),c=t(9852),o=t(7294),d=t(7516),u=t(1510),x=t(1954),m=t(6154),h=t(6501),p=t(1524),v=e=>{let{data:s,mutate:t}=(0,x.Z)(),{mutate:l}=(0,a.Z)(e),r=(0,p.Z)(),n=(0,o.useMemo)(()=>{let t=(null==s?void 0:s.followingIds)||[];return t.includes(e)},[s,e]),i=(0,o.useCallback)(async()=>{if(!s)return r.onOpen();try{let s;s=n?()=>m.Z.delete("/api/follow",{data:{userId:e}}):()=>m.Z.post("/api/follow",{userId:e}),await s(),t(),l(),h.Am.success("Success")}catch(e){h.Am.error("Something went wrong")}},[s,n,e,t,l,r]);return{isFollowing:n,toggleFollow:i}},f=t(4227),j=t(8726),w=e=>{var s;let{userId:t}=e,{data:r}=(0,x.Z)(),{data:n}=(0,a.Z)(t),i=(0,f.Z)(),{isFollowing:c,toggleFollow:m}=v(t),h=(0,o.useMemo)(()=>(null==n?void 0:n.createdAt)?(0,u.Z)(new Date(n.createdAt),"MMMM yyyy"):null,[null==n?void 0:n.createdAt]);return(0,l.jsxs)("div",{className:"border-b-[1px] border-neutral-800 pb-4",children:[(0,l.jsx)("div",{className:"flex justify-end p-2",children:(null==r?void 0:r.id)===t?(0,l.jsx)(j.Z,{secondary:!0,label:"Edit",onClick:i.onOpen}):(0,l.jsx)(j.Z,{onClick:m,label:c?"Unfollow":"Follow",secondary:!c,outline:c})}),(0,l.jsxs)("div",{className:"mt-8 px-4",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"text-white text-2xl font-semibold",children:null==n?void 0:n.name}),(0,l.jsxs)("p",{className:"text-md text-neutral-500",children:["@",null==n?void 0:n.username]})]}),(0,l.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,l.jsx)("p",{className:"text-white",children:null==n?void 0:n.bio}),(0,l.jsxs)("div",{className:" flex  flex-row  items-center  gap-2  mt-4  text-neutral-500 ",children:[(0,l.jsx)(d.R1q,{size:24}),(0,l.jsxs)("p",{children:["Joined ",h]})]})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center mt-4 gap-6",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,l.jsx)("p",{className:"text-white",children:null==n?void 0:null===(s=n.followingIds)||void 0===s?void 0:s.length}),(0,l.jsx)("p",{className:"text-neutral-500",children:"Following"})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,l.jsx)("p",{className:"text-white",children:(null==n?void 0:n.followersCount)||0}),(0,l.jsx)("p",{className:"text-neutral-500",children:"Followers"})]})]})]})]})},N=t(5675),Z=t.n(N),b=t(9873),g=e=>{let{userId:s}=e,{data:t}=(0,a.Z)(s);return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"bg-neutral-700 h-44 relative",children:[(null==t?void 0:t.coverImage)&&(0,l.jsx)(Z(),{src:t.coverImage,fill:!0,alt:"Cover Image",style:{objectFit:"cover"}}),(0,l.jsx)("div",{className:"absolute -bottom-16 left-4",children:(0,l.jsx)(b.Z,{userId:s,isLarge:!0,hasBorder:!0})})]})})},k=()=>{let e=(0,r.useRouter)(),{userId:s}=e.query,{data:t,isLoading:o}=(0,a.Z)(s);return o||!t?(0,l.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,l.jsx)(n.Z,{color:"lightblue",size:80})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z,{showBackArrow:!0,label:null==t?void 0:t.name}),(0,l.jsx)(g,{userId:s}),(0,l.jsx)(w,{userId:s}),(0,l.jsx)(i.Z,{userId:s})]})}}},function(e){e.O(0,[422,48,774,888,179],function(){return e(e.s=9508)}),_N_E=e.O()}]);